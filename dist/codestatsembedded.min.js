const LEVEL_FACTOR=.025;function getLevel(a){return Math.floor(Math.sqrt(a)*LEVEL_FACTOR)}function getNextLevelXp(a){return Math.ceil((a+1)/LEVEL_FACTOR)**2}function getLevelProgress(a){const b=getLevel(a),c=getNextLevelXp(b-1),d=getNextLevelXp(b);return Math.round(100*((a-c)/(d-c)))}function formatNumber(a){return a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function processMonthNumbers(a){var b=[];for(var c in a)switch(a[c]){case"01":b.push("Jan");break;case"02":b.push("Feb");break;case"03":b.push("Mar");break;case"04":b.push("Apr");break;case"05":b.push("May");break;case"06":b.push("Jun");break;case"07":b.push("Jul");break;case"08":b.push("Aug");break;case"09":b.push("Sep");break;case"10":b.push("Oct");break;case"11":b.push("Nov");break;case"12":b.push("Dec");}return b}function setupLanguages(a){a=a.slice(0,5);var b;for(b=0;b<a.length;b++){var c=getLevelProgress(a[b].content.xps),d=$("<div></div>").addClass("combined-level-progress").appendTo(".top-languages"),e=$("<h4></h4>").addClass("level-counter").appendTo(d);$("<strong></strong>").html(a[b].name).addClass("level-prefix").appendTo(e),$("<span></span>").html(" Level "+getLevel(a[b].content.xps)+" ("+formatNumber(a[b].content.xps)+")").addClass("total-xp").appendTo(e),$("<span></span>").html(" (+"+formatNumber(a[b].content.new_xps)+")").addClass("recent-xp").appendTo(e);var f=$("<div></div>").addClass("progress-bar").appendTo(d);$("<span></span>").attr("role","progressbar").attr("aria-valuetext","Level progress "+c+"%.").css("width",c+"%").addClass("progress progress-old").appendTo(f),$("<span></span>").attr("aria-hidden",!0).html(c+"&nbsp;%").addClass("total-progress").appendTo(f)}}function setupDates(a){var b=a[a.length-1].date.slice(5,7),c=a.findIndex(function(a){return a.date.slice(5,7)>b});a=a.slice(c,a.length-1);var d,e=[],f=[],g=a[0].date.slice(5,7),h=0;for(d=0;d<a.length;d++){var j=a[d].date.slice(5,7);g===j?h+=a[d].value:(e.push(h),f.push(g),g=j,h=a[d].value)}e.push(h),f.push(g);var k=processMonthNumbers(f);new Chart($("#myChart"),{type:"line",data:{labels:k,datasets:[{data:e,label:"XP",borderColor:"#3e95cd",fill:!0}]}})}function loadData(a){$.getJSON("https://codestats.net/api/users/"+a,function(a){$("<small>Summary of experience and top languages for <a href='https://codestats.net/users/"+a.user+"' target='blank'>@"+a.user+"</a></small>").addClass("dataOf").appendTo(".bottom-container");var b=[];for(var c in a.languages)b.push({name:c,content:a.languages[c]});b.sort(function(c,a){return a.content.xps>c.content.xps?1:a.content.xps<c.content.xps?-1:0}),setupLanguages(b);var d=[];for(var e in a.dates)d.push({date:e,value:a.dates[e]});d.sort(function(c,a){return a.date<c.date?1:a.date>c.date?-1:0}),setupDates(d)})}function CodeStatsEmbed(a,b){$("body").append("<script src=\"https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js\"></script>");var c=$("<div></div>").attr("id","codestatsembedded").appendTo(a),d=$("<div></div>").addClass("top-container").appendTo(c),e=$("<div></div>").addClass("bottom-container").appendTo(c);$("<small>\uD83D\uDCC4 Stats retrived from <a href=\"https://codestats.net\">codestats.net</a> using \uD83D\uDCBB <a href=\"https://github.com/byjokese/code-stats-embeded\">code-stats-embeded</a> by <a href=\"https://byjokese.com\">@byjokese</a></small>").appendTo(e);var f=$("<div></div>").addClass("codestats-colum-left");f.appendTo(d);var g=$("<div></div>").addClass("separator");g.appendTo(d);var h=$("<div></div>").addClass("codestats-colum-right");h.appendTo(d),$("<h2>Last year Experience</h2>").addClass("column-title").appendTo(f),$("<canvas id='myChart' width='100%' height='60'></canvas>").appendTo(f),$("<h2>Top Languages</h2>").addClass("column-title").appendTo(h);$("<div></div>").addClass("top-languages").appendTo(h);loadData(b)}