function getLevel(e){return Math.floor(Math.sqrt(e)*LEVEL_FACTOR)}function getNextLevelXp(e){return Math.ceil((e+1)/LEVEL_FACTOR)**2}function getLevelProgress(e){const a=getLevel(e),s=getNextLevelXp(a-1),t=getNextLevelXp(a),n=e-s,r=t-s;return Math.round(n/r*100)}function formatNumber(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function processMonthNumbers(e){var a=[];for(var s in e)switch(e[s]){case"01":a.push("Jan");break;case"02":a.push("Feb");break;case"03":a.push("Mar");break;case"04":a.push("Apr");break;case"05":a.push("May");break;case"06":a.push("Jun");break;case"07":a.push("Jul");break;case"08":a.push("Aug");break;case"09":a.push("Sep");break;case"10":a.push("Oct");break;case"11":a.push("Nov");break;case"12":a.push("Dec")}return a}function setupLanguages(e){var a;for(e=e.slice(0,5),a=0;a<e.length;a++){var s=getLevelProgress(e[a].content.xps),t=$("<div></div>").addClass("combined-level-progress").appendTo(".top-languages"),n=$("<h4></h4>").addClass("level-counter").appendTo(t);$("<strong></strong>").html(e[a].name).addClass("level-prefix").appendTo(n),$("<span></span>").html(" Level "+getLevel(e[a].content.xps)+" ("+formatNumber(e[a].content.xps)+")").addClass("total-xp").appendTo(n),$("<span></span>").html(" (+"+formatNumber(e[a].content.new_xps)+")").addClass("recent-xp").appendTo(n);var r=$("<div></div>").addClass("progress-bar").appendTo(t);$("<span></span>").attr("role","progressbar").attr("aria-valuetext","Level progress "+s+"%.").css("width",s+"%").addClass("progress progress-old").appendTo(r),$("<span></span>").attr("aria-hidden",!0).html(s+"&nbsp;%").addClass("total-progress").appendTo(r)}}function setupDates(e){function a(e){return e.date.slice(5,7)>s}var s=e[e.length-1].date.slice(5,7),t=e.findIndex(a);-1===t&&(t=1),e=e.slice(t,e.length-1);var n,r=[],d=[],o=e[0].date.slice(5,7),p=0;for(n=0;n<e.length;n++){var l=e[n].date.slice(5,7);o===l?p+=e[n].value:(r.push(p),d.push(o),o=l,p=e[n].value)}r.push(p),d.push(o);var c=processMonthNumbers(d);new Chart($("#myChart"),{type:"line",data:{labels:c,datasets:[{data:r,label:"XP",borderColor:"#3e95cd",fill:!0}]}})}function loadData(e){$.getJSON("https://codestats.net/api/users/"+e,function(e){$("<small>Summary of experience and top languages for <a href='https://codestats.net/users/"+e.user+"' target='blank'>@"+e.user+"</a></small>").addClass("dataOf").appendTo(".bottom-container");var a=[];for(var s in e.languages)a.push({name:s,content:e.languages[s]});a.sort(function(e,a){return a.content.xps>e.content.xps?1:a.content.xps<e.content.xps?-1:0}),setupLanguages(a);var t=[];for(var n in e.dates)t.push({date:n,value:e.dates[n]});t.sort(function(e,a){return a.date<e.date?1:a.date>e.date?-1:0}),setupDates(t)})}function CodeStatsEmbed(e,a){$("body").append('<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"></script>');var s=$("<div></div>").attr("id","codestatsembedded").appendTo(e),t=$("<div></div>").addClass("top-container").appendTo(s),n=$("<div></div>").addClass("bottom-container").appendTo(s);$('<small>ðŸ“„ Stats retrived from <a href="https://codestats.net">codestats.net</a> using ðŸ’» <a href="https://github.com/byjokese/code-stats-embeded">code-stats-embeded</a> by <a href="https://byjokese.com">@byjokese</a></small>').appendTo(n);var r=$("<div></div>").addClass("codestats-colum-left");r.appendTo(t);var d=$("<div></div>").addClass("separator");d.appendTo(t);var o=$("<div></div>").addClass("codestats-colum-right");o.appendTo(t),$("<h2>Last year Experience</h2>").addClass("column-title").appendTo(r),$("<canvas id='myChart' width='100%' height='60'></canvas>").appendTo(r),$("<h2>Top Languages</h2>").addClass("column-title").appendTo(o);$("<div></div>").addClass("top-languages").appendTo(o);loadData(a)}const LEVEL_FACTOR=.025;
